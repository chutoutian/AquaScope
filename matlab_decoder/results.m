gt_embedding = [125, 84, 548, 237, 608, 972, 875, 184, 577, 498, 887, 906, 172, 528, 539, 928, 508, 914, 382, 217, 730, 593, 589, 683, 533, 810, 821, 92, 171, 700, 982, 579, 788, 601, 589, 226, 624, 813, 903, 610, 937, 970, 109, 609, 539, 417, 308, 835, 761, 471, 358, 749, 469, 865, 1012, 150, 500, 805, 261, 40, 503, 548, 965, 713]';
gt_transmitted_bytes = [29,9,29,17,1,29,29,1,7,20,25,26,8,13,21,28,11,9,12,28,24,25,2,17,15,24,14,12,19,6,31,23,23,27,15,23,11,7,21,23,12,9,4,29,23,8,2,25,30,18,28,26,26,8,28,2,20,17,21,25,2,11,6,2,21,4,15,13,22,30,8,13,29,17,17,27,1,11,11,3,22,12,26,7,14,3,7,1,28,24,29,10,13,17,4,23,29,27,7,10,29,0,14,14,2,30,8,3,10,11,11,13,24,3,20,29,3,18,6,17,20,7,8,13,1,16,2,5,3,9,28,3,4,20,31,16,0,26,17,15,31,4,17,12,4,23,15,9,18,23,10,2,25,6,21,14,4,11,1,10,7,23,29,19,15,11,1,9,14,21,20,19,19,16,8,27,30,21,29,2,16,22,3,9,18,10,28,29,30,25,19,23,25,24,2,28,29,16,9,15,10,29,16,16,29,5,7,30,12,20,0,21,30,1,5,21,1,22,0,28,19,16,7,23,12,23,31,2,6,26,21,1,24,29,27,8,12,20,9,17,16,26,4,21,28,25,13,23,24,18,14,10,8,26,4,28,22,21,11,22,22,22,21,11]';

a = [125,84,550,237,608,973,875,181,603,227,503,906,172,528,539,928,508,914,382,473,686,593,589,683,533,874,821,92,171,700,982,579,792,601,589,226,624,813,903,706,937,970,109,615,539,417,308,835,760,983,358,749,469,865,1012,150,500,805,261,40,503,548,965,537]';
symbol = [29,9,29,16,0,29,29,0,6,18,25,26,8,13,19,28,11,9,12,28,24,25,2,16,14,23,12,12,17,5,30,23,23,27,14,23,10,7,21,23,12,9,4,29,23,6,2,25,30,17,28,26,26,8,28,2,18,16,21,25,2,10,6,1,19,11,14,14,18,26,7,14,23,12,16,27,1,11,10,2,17,12,26,7,14,3,7,0,28,23,29,10,14,16,4,23,29,27,7,10,29,0,14,15,2,30,8,3,10,11,11,14,24,3,20,29,3,17,6,16,19,7,8,14,0,15,2,5,3,9,28,3,4,20,30,15,0,26,17,14,30,4,16,12,4,23,15,9,16,23,10,2,25,6,21,14,4,11,1,10,7,23,29,18,14,11,1,9,14,21,20,18,18,15,8,27,30,21,29,2,15,22,3,9,17,10,28,29,30,25,19,23,25,24,2,28,29,16,9,14,10,29,16,15,29,5,7,30,12,19,0,21,30,1,5,21,1,22,0,28,18,15,7,23,12,23,31,2,6,26,21,1,24,29,27,8,13,19,9,16,15,26,4,21,28,25,13,23,24,17,13,10,8,26,4,28,22,21,11,22,22,22,21,11]';
symbol - gt_transmitted_bytes;
nnz(a - gt_embedding)
baseDir = 'raw_data/SF_5_BW_2_FC_25_bathtub/';
FileName_embedding = 'Bob-Rx_Embedding-';
FileName_symbol = 'Bob-Rx_Symbols-';
numFiles = 10; % Total number of files

% Initialize an empty array for concatenation
received_embedding = [];
received_symbol = [];

% Loop through each file indexnnz
for idx = 0:numFiles-1
    % Construct the file name
    fileName_embedding = sprintf('%s%s%d.txt', baseDir, FileName_embedding, idx);
    fileName_symbol = sprintf('%s%s%d.txt', baseDir, FileName_symbol, idx);
    embedding = load(fileName_embedding)';
    symbol = load(fileName_symbol)';
    received_embedding = [received_embedding, embedding];
end




for i = 1:numFiles
    rx_emb = received_embedding(:,i);
    nnz(rx_emb - gt_embedding);
    %nnz(received_symbol(5:length(received_symbol),i) - gt_transmitted_bytes);
end